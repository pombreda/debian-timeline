#!/usr/bin/make -f

INPUT	:= $(wildcard data/*)
OUTPUT	:= $(addsuffix .xml,$(subst data/,xml/,$(basename $(INPUT))))

%:
	dh $@

override_dh_auto_build: $(OUTPUT)
	dh_auto_build

xml/%.xml: data/%
	@mkdir -p xml
	./build.py $< >$@

gh-pages: $(OUTPUT)
	rm -f .gitignore
	cp -rv /usr/share/javascript/timeline_js media
	cp -rv /usr/share/javascript/timeline_ajax media
	git add --all .
	git commit -m "Automatic build for $@"

.PHONY: gh-pages
